<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Operations &mdash; HARP 1.26 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="next" title="Ingestion definitions" href="ingestions/index.html" />
    <link rel="prev" title="wind velocity derivations" href="algorithms/derivations/wind_velocity.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            HARP
          </a>
              <div class="version">
                1.26
              </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions/index.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms/index.html">Algorithms</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#comparison-filter">Comparison filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#membership-test-filter">Membership test filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#function-call">Function call</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collocation-result-file">Collocation result file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#area-mask-file">Area mask file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formal-definition">Formal definition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ingestions/index.html">Ingestion definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="libharp.html">C library</a></li>
<li class="toctree-l1"><a class="reference internal" href="idl.html">IDL interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="matlab.html">MATLAB interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="R.html">R interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Command line tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HARP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Operations</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="operations">
<h1>Operations</h1>
<p>HARP provides a simple expression syntax with which one can specify operations that need to be performed on a product.
A list of operations is always provided as a single string where individual operations are separated by a semi-colon (<cite>;</cite>).
Each operation can be either a comparison filter, a membership test filter, or a function call.
Strings used in operations should be quoted with double quotes.</p>
<section id="comparison-filter">
<h2>Comparison filter</h2>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">variable</span> <span class="pre">operator</span> <span class="pre">value</span> <span class="pre">[unit]</span></code></p>
</div></blockquote>
<p>Filter a dimension for all variables in the product such that items for which
the value of the provided variable does not match the expression get excluded.
The variable should be one dimensional or two dimensional (with the first
dimension being time). The dimension that gets filtered is the last dimension
of the referenced variable.</p>
<p>Supported operators are:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">==</span></code> <code class="docutils literal notranslate"><span class="pre">!=</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> (for numerical values only)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">=&amp;</span></code> <code class="docutils literal notranslate"><span class="pre">=|</span></code> <code class="docutils literal notranslate"><span class="pre">!&amp;</span></code> (bitfield operators, for integer values only)</div>
</div>
</div></blockquote>
<p>Bitfield operators work such that <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=&amp;</span> <span class="pre">5</span></code> returns true if both bits 1 and 3 in <code class="docutils literal notranslate"><span class="pre">a</span></code> are set,
<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=|</span> <span class="pre">5</span></code> returns true of either bits 1 or 3 or both in <code class="docutils literal notranslate"><span class="pre">a</span></code> are set,
and <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">!&amp;</span> <span class="pre">5</span></code> returns true if neither bits 1 and 3 in <code class="docutils literal notranslate"><span class="pre">a</span></code> are set.</p>
<p>If a unit is specified, the comparison will be performed in the specified unit.
Otherwise, it will be performed in the unit that the variable currently has.
Units can only be specified for numerical values.</p>
<p>Comparison operations can also be performed on the index of a dimension.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">index(dimension)</span> <span class="pre">operator</span> <span class="pre">value</span></code></p>
</div></blockquote>
<p>For instance, <code class="docutils literal notranslate"><span class="pre">index(vertical)</span> <span class="pre">==</span> <span class="pre">0</span></code> will keep only the lowest vertical level of a vertical profile.</p>
</section>
<section id="membership-test-filter">
<h2>Membership test filter</h2>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">variable</span> <span class="pre">in</span> <span class="pre">(value,</span> <span class="pre">...)</span> <span class="pre">[unit]</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">variable</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">(value,</span> <span class="pre">...)</span> <span class="pre">[unit]</span></code></div>
</div>
</div></blockquote>
<p>Exclude measurements that occur or do not occur in the specified list.</p>
<p>If a unit is specified, the comparison will be performed in the specified unit.
Otherwise, it will be performed in the unit that the variable currently has.
Units can only be specified for numerical variables.</p>
</section>
<section id="function-call">
<h2>Function call</h2>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">function(argument,</span> <span class="pre">...)</span></code></p>
</div></blockquote>
<p>Supported functions:</p>
<blockquote>
<div><dl id="operation-area-covers-area">
<dt><code class="docutils literal notranslate"><span class="pre">area_covers_area((lat,</span> <span class="pre">...)</span> <span class="pre">[unit],</span> <span class="pre">(lon,</span> <span class="pre">...)</span> <span class="pre">[unit])</span></code></dt><dd><p>Exclude measurements whose area does not fully cover the given polygon.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">area_covers_area((51.98,51.98,52.02,52.02),(4.33,4.39,4.39,4.33))</span></code></div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">area_covers_area(area-mask-file)</span></code></dt><dd><p>Exclude measurements whose area does not fully cover one of the
areas of the area mask file.</p>
<p>Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">area_covers_area(&quot;areas.csv&quot;)</span></code></div>
</div>
</div></blockquote>
</dd>
</dl>
<dl id="operation-area-covers-point">
<dt><code class="docutils literal notranslate"><span class="pre">area_covers_point(latitude</span> <span class="pre">[unit],</span> <span class="pre">longitude</span> <span class="pre">[unit])</span></code></dt><dd><p>Exclude measurements whose area does not cover the given point.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">area_covers_point(52.012,</span> <span class="pre">4.357)</span></code></div>
</div>
</div></blockquote>
</dd>
</dl>
<dl id="operation-area-inside-area">
<dt><code class="docutils literal notranslate"><span class="pre">area_inside_area((lat,</span> <span class="pre">...)</span> <span class="pre">[unit],</span> <span class="pre">(lon,</span> <span class="pre">...)</span> <span class="pre">[unit])</span></code></dt><dd><p>Exclude measurements whose area is not inside the given polygon.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">area_inside_area((50,50,54,54),(3,8,8,3))</span></code></div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">area_inside_area(area-mask-file)</span></code></dt><dd><p>Exclude measurements whose area is not inside one of the areas of
the area mask file.</p>
</dd>
</dl>
<dl class="simple" id="operation-area-intersects-area">
<dt><code class="docutils literal notranslate"><span class="pre">area_intersects_area((lat,</span> <span class="pre">...)</span> <span class="pre">[unit],</span> <span class="pre">(lon,</span> <span class="pre">...)</span> <span class="pre">[unit],</span> <span class="pre">minimum-overlap-fraction)</span></code></dt><dd><p>Exclude measurements whose area does not overlap at least the
specified fraction with the given polygon.
The fraction is calculated as area(intersection)/min(area(x),area(y))</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">area_intersects_area(area-mask-file,</span> <span class="pre">minimum-overlap-fraction)</span></code></dt><dd><p>Exclude measurements whose area does not overlap at least the
specified fraction with one the areas of the area mask file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">area_intersects_area((lat,</span> <span class="pre">...)</span> <span class="pre">[unit],</span> <span class="pre">(lon,</span> <span class="pre">...)</span> <span class="pre">[unit])</span></code></dt><dd><p>Exclude measurements whose area does not overlap with the given
polygon.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">area_intersects_area(area-mask-file)</span></code></dt><dd><p>Exclude measurements whose area does not overlap with one of the
areas of the area mask file.</p>
</dd>
</dl>
<dl id="operation-bin">
<dt><code class="docutils literal notranslate"><span class="pre">bin()</span></code></dt><dd><p>For all variables in a product perform an averaging in the time
dimension such that all samples end up in a single bin.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bin(variable)</span></code></dt><dd><p>For all variables in a product perform an averaging in the time
dimension such that all samples in the same bin get averaged.
A bin is defined by all samples of the given variable that have
the same value.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">bin(index)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bin(validity)</span></code></div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bin((variable,</span> <span class="pre">...))</span></code></dt><dd><p>Same as above, but each bin is defined by the unique combinations
of values from the variables in the list.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">bin((year,</span> <span class="pre">month))</span></code></div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bin(collocation-result-file,</span> <span class="pre">a|b)</span></code></dt><dd><p>For all variables in a product perform an averaging in the time
dimension such that all samples in the same bin get averaged.
A bin is defined by all samples having the same collocated sample
from the dataset that is indicated by the second parameter.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">bin(&quot;collocation-result.csv&quot;,</span> <span class="pre">b)</span></code></div>
<div class="line">(the product is part of dataset A and the collocated
sample that defines the bin is part of dataset B)</div>
</div>
</div></blockquote>
</dd>
</dl>
<dl id="operation-bin-spatial">
<dt><code class="docutils literal notranslate"><span class="pre">bin_spatial((lat_edge,</span> <span class="pre">lat_edge,</span> <span class="pre">...),</span> <span class="pre">(lon_edge,</span> <span class="pre">lon_edge,</span> <span class="pre">...))</span></code></dt><dd><p>For all variables in a product map all time samples onto a
spatial latitude/longitude grid. The latitude/longitude grid is
defined by the list of edge values.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">bin_spatial((-90,-60,-30,0,30,60,90),(-180,0,180))</span></code></div>
<div class="line">(bin data onto latitude bands, separated into an</div>
<div class="line-block">
<div class="line">eastern and western hemisphere)</div>
</div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bin_spatial(lat_edge_length,</span> <span class="pre">lat_edge_offset,</span> <span class="pre">lat_edge_step,</span> <span class="pre">lon_edge_length,</span> <span class="pre">lon_edge_offset,</span> <span class="pre">lon_edge_step)</span></code></dt><dd><p>For all variables in a product map all time samples onto a
spatial latitude/longitude grid. The latitude/longitude grid is
defined by the list of edge values.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">bin_spatial(7,</span> <span class="pre">-90,</span> <span class="pre">30,</span> <span class="pre">3,</span> <span class="pre">-180,</span> <span class="pre">180)</span></code></div>
<div class="line">(this is the same as <code class="docutils literal notranslate"><span class="pre">bin_spatial((-90,-60,-30,0,30,60,90),(-180,0,180))</span></code>)</div>
</div>
</div></blockquote>
</dd>
</dl>
<dl id="operation-clamp">
<dt><code class="docutils literal notranslate"><span class="pre">clamp(dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">(lower_bound,</span> <span class="pre">upper_bound))</span></code></dt><dd><p>Reduce the given dimension such that values of the given axis-variable
and associated &lt;axis-variable&gt;_bounds fall within the given lower and
upper bounds.
The operation will use a
<code class="docutils literal notranslate"><span class="pre">derive(axis-variable</span> <span class="pre">{[time,]dimension}</span> <span class="pre">unit)</span></code> and
<code class="docutils literal notranslate"><span class="pre">derive(&lt;axis-variable&gt;_bounds</span> <span class="pre">{[time,]dimension}</span> <span class="pre">unit)</span></code> to
determine the current grid and boundaries. These grid+boundaries
are then updated to fall within the given lower and upper limits.
The updated grid+boundaries are then used to regrid the product
in the given dimension. The values <code class="docutils literal notranslate"><span class="pre">+inf</span></code> and <code class="docutils literal notranslate"><span class="pre">-inf</span></code> can be
used to indicate an unbound edge.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">clamp(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">(-inf,</span> <span class="pre">60)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">clamp(vertical,</span> <span class="pre">pressure</span> <span class="pre">[hPa],</span> <span class="pre">(+inf,</span> <span class="pre">200)</span></code></div>
</div>
</div></blockquote>
</dd>
</dl>
<dl class="simple" id="operation-collocate-left">
<dt><code class="docutils literal notranslate"><span class="pre">collocate_left(collocation-result-file)</span></code></dt><dd><p>Apply the specified collocation result file as an index
filter assuming the product is part of dataset A.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">collocate_left(collocation-result-file,</span> <span class="pre">min_collocation_index)</span></code></dt><dd><p>Same as regular <code class="docutils literal notranslate"><span class="pre">collocation_left</span></code> operation but only include
collocations where collocation_index &gt;= min_collocation_index</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">collocate_left(collocation-result-file,</span> <span class="pre">min_collocation_index,</span> <span class="pre">max_collocation_index)</span></code></dt><dd><p>Same as regular <code class="docutils literal notranslate"><span class="pre">collocation_left</span></code> operation but only include
collocations where min_collocation_index &lt;= collocation_index &lt;= max_collocation_index</p>
</dd>
</dl>
<dl class="simple" id="operation-collocate-right">
<dt><code class="docutils literal notranslate"><span class="pre">collocate_right(collocation-result-file)</span></code></dt><dd><p>Apply the specified collocation result file as an index
filter assuming the product is part of dataset B.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">collocate_right(collocation-result-file,</span> <span class="pre">min_collocation_index)</span></code></dt><dd><p>Same as regular <code class="docutils literal notranslate"><span class="pre">collocate_right</span></code> operation but only include
collocations where collocation_index &gt;= min_collocation_index</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">collocate_right(collocation-result-file,</span> <span class="pre">min_collocation_index,</span> <span class="pre">max_collocation_index)</span></code></dt><dd><p>Same as regular <code class="docutils literal notranslate"><span class="pre">collocate_right</span></code> operation but only include
collocations where min_collocation_index &lt;= collocation_index &lt;= max_collocation_index</p>
</dd>
</dl>
<dl id="operation-derive">
<dt><code class="docutils literal notranslate"><span class="pre">derive(variable</span> <span class="pre">[datatype]</span> <span class="pre">[unit])</span></code></dt><dd><p>The derive operation <em>without</em> a dimension specification can be
used to change the data type or unit of an already existing
variable. A variable with the given name should therefore already
be in the product (with any kind of dimensions).
If a unit conversion is performed and no data type is specified
the variable will be converted to <code class="docutils literal notranslate"><span class="pre">double</span></code> values.</p>
<p>Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">derive(altitude</span> <span class="pre">[km])</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">derive(latitude</span> <span class="pre">float)</span></code></div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">derive(variable</span> <span class="pre">[datatype]</span> <span class="pre">{dimension-type,</span> <span class="pre">...}</span> <span class="pre">[unit])</span></code></dt><dd><p>The derive operation <em>with</em> a dimension specification is used
to derive the specified variable from other variables found in
the product (i.e. a variable with that name and dimension does
not have to exist yet). The <code class="docutils literal notranslate"><span class="pre">--list-derivations</span></code> option of
harpdump can be used to list available variable conversions.
The algorithms behind all the conversions are described
in the <a class="reference internal" href="algorithms/index.html"><span class="doc">Algorithms</span></a> section of the
documentation.
If the datatype is not provided then the default result data
type for a conversion will be used (usually <code class="docutils literal notranslate"><span class="pre">double</span></code>).
If a variable with the given name and dimension specification
already exists then this operation will just perform a data
type and/or unit conversion on that variable.</p>
<p>Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">derive(number_density</span> <span class="pre">{time,vertical}</span> <span class="pre">[molec/m3])</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">derive(latitude</span> <span class="pre">float</span> <span class="pre">{time})</span></code></div>
</div>
</div></blockquote>
</dd>
</dl>
<dl id="operation-derive-smoothed-column">
<dt><code class="docutils literal notranslate"><span class="pre">derive_smoothed_column(variable</span> <span class="pre">{dimension-type,</span> <span class="pre">...}</span> <span class="pre">[unit],</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">collocation-result-file,</span> <span class="pre">a|b,</span> <span class="pre">dataset-dir)</span></code></dt><dd><p>Derive the given integrated column value by first deriving
a partial column profile variant of the variable and then
smoothing/integrating this partial column profile using the
column avaraging kernel (and a-priori, if available) from a
collocated dataset. The fourth parameter indicates which dataset
contains the avaraging kernel.
Before smoothing the partial column profile is regridded to
the grid of the column averaging kernel using the given
axis-variable (see also <code class="docutils literal notranslate"><span class="pre">regrid()</span></code>).</p>
<p>Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">derive_smoothed_column(O3_column_number_density</span> <span class="pre">{time}</span> <span class="pre">[molec/cm2],</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">&quot;collocation-result.csv&quot;,</span> <span class="pre">b,</span> <span class="pre">&quot;./correlative_data/&quot;)</span></code></p>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">derive_smoothed_column(variable</span> <span class="pre">{dimension-type,</span> <span class="pre">...}</span> <span class="pre">[unit],</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">collocated-file)</span></code></dt><dd><p>Derive the given integrated column value by first deriving
a partial column profile variant of the variable and then
smoothing/integrating this partial column profile using the
column avaraging kernel (and a-priori, if available) from a
single merged collocated product. Both the product and the
collocated product need to have a <code class="docutils literal notranslate"><span class="pre">collocation_index</span></code>
variable that will be used to associate the right collocated
grid/avk/apriori to each sample.
Before smoothing the partial column profile is regridded to
the grid of the column averaging kernel using the given
axis-variable (see also <code class="docutils literal notranslate"><span class="pre">regrid()</span></code>).</p>
<p>Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">derive_smoothed_column(O3_column_number_density</span> <span class="pre">{time}</span> <span class="pre">[molec/cm2],</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">&quot;./collocated_file.nc&quot;)</span></code></p>
</div></blockquote>
</dd>
</dl>
<dl id="operation-exclude">
<dt><code class="docutils literal notranslate"><span class="pre">exclude(variable,</span> <span class="pre">...)</span></code></dt><dd><p>Mark the specified variable(s) for exclusion from the ingested product.
All variables marked for exclusion will be excluded from the ingested
product, all other variables will be kept.
Variables that do not exist will be ignored.
Instead of a variable name, a pattern using ‘*’ and ‘?’ can be provided.</p>
<p>Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">exclude(datetime,</span> <span class="pre">*uncertainty*)</span></code></p>
</div></blockquote>
</dd>
</dl>
<dl id="operation-flatten">
<dt><code class="docutils literal notranslate"><span class="pre">flatten(dimension)</span></code></dt><dd><p>Flatten a product for a certain dimension by collapsing the
given dimension into the time dimension. The time dimension
will thus grow by a factor equal to the length of the given
dimension and none of the variables in the product will
depend on the given dimension anymore. If the length of the
flattened dimension does not equal 1 then: variables that
depend more than once on the given dimension will be removed,
the index and collocation_index variables will be removed,
and time independent variables are made time dependent.
Independent dimensions and the time dimension cannot be flattened.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">flatten(latitude);flatten(longitude)</span></code></div>
<div class="line">(turn a 2D lat/lon grid into a a series of individual points)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">regrid(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">(20));flatten(vertical)</span></code></div>
<div class="line">(vertically slice the product at 20 km altitude)</div>
</div>
</div></blockquote>
</dd>
</dl>
<dl class="simple" id="operation-invalid">
<dt><code class="docutils literal notranslate"><span class="pre">invalid(variable)</span></code></dt><dd><p>Filter a dimension for all variables in the product such that
only invalid values for the variable provided as parameter are included
(values outside the valid range of the variable, or NaN).
This operation is executed similar to a comparison filter and provides
the opposite result of the <code class="docutils literal notranslate"><span class="pre">valid(variable)</span></code> operation.</p>
</dd>
</dl>
<dl id="operation-keep">
<dt><code class="docutils literal notranslate"><span class="pre">keep(variable,</span> <span class="pre">...)</span></code></dt><dd><p>Mark the specified variable(s) for inclusion in the ingested product.
All variables marked for inclusion will be kept in the ingested
product, all other variables will be excluded.
Trying to keep a variable that does not exist will result in an error.
Instead of a variable name, a pattern using ‘*’ and ‘?’ can be
provided (unmatched patterns will not result in an error).</p>
<p>Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">keep(datetime*,</span> <span class="pre">latitude,</span> <span class="pre">longitude)</span></code></p>
</div></blockquote>
</dd>
</dl>
<dl id="operation-longitude-range">
<dt><code class="docutils literal notranslate"><span class="pre">longitude_range(minimum</span> <span class="pre">[unit],</span> <span class="pre">maximum</span> <span class="pre">[unit])</span></code></dt><dd><p>Exclude measurements of which the longitude of the
measurement location falls outside the specified range.
This function correctly handles longitude ranges that
cross the international date line. It checks whether
<code class="docutils literal notranslate"><span class="pre">wrap(longitude,</span> <span class="pre">minimum,</span> <span class="pre">minimum</span> <span class="pre">+</span> <span class="pre">360)</span> <span class="pre">&lt;=</span> <span class="pre">maximum</span></code>.</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">longitude_range(179.0,</span> <span class="pre">181.0)</span></code></div>
<div class="line">(select a 2 degree range around the international dateline)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">longitude_range(-181.0,</span> <span class="pre">-179.0)</span></code></div>
<div class="line">(gives exact same result as the first example)</div>
</div>
</div></blockquote>
</dd>
</dl>
<dl id="operation-point-distance">
<dt><code class="docutils literal notranslate"><span class="pre">point_distance(latitude</span> <span class="pre">[unit],</span> <span class="pre">longitude</span> <span class="pre">[unit],</span> <span class="pre">distance</span> <span class="pre">[unit])</span></code></dt><dd><p>Exclude measurements whose point location is situated further than
the specified distance from the given location.
Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">point_distance(52.012,</span> <span class="pre">4.357,</span> <span class="pre">3</span> <span class="pre">[km])</span></code></p>
</div></blockquote>
</dd>
</dl>
<dl id="operation-point-in-area">
<dt><code class="docutils literal notranslate"><span class="pre">point_in_area((lat,</span> <span class="pre">...)</span> <span class="pre">[unit],</span> <span class="pre">(lon,</span> <span class="pre">...)</span> <span class="pre">[unit])</span></code></dt><dd><p>Exclude measurements whose point location does not fall inside the
measurement area.
Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">point_in_area((50,50,54,54)</span> <span class="pre">[degN],(3,8,8,3)</span> <span class="pre">[degE])</span></code></p>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">point_in_area(area-mask-file)</span></code></dt><dd><p>Exclude measurements whose point location does not fall inside one of
the areas from the area mask file.</p>
</dd>
</dl>
<dl id="operation-rebin">
<dt><code class="docutils literal notranslate"><span class="pre">rebin(dimension,</span> <span class="pre">axis-bounds-variable</span> <span class="pre">unit,</span> <span class="pre">(value,</span> <span class="pre">...))</span></code></dt><dd><p>Regrid all variables in the product for the given dimension using
the given axis boundaries variable as target grid. The operation will
use a <code class="docutils literal notranslate"><span class="pre">derive(axis-variable</span> <span class="pre">{[time,]dimension,2}</span> <span class="pre">unit)</span></code> to determine
the current grid. The target grid is specified as a list of N+1 boundary
edge values (for N adjacent intervals).
Rebinning uses a weighted average of the overlapping intervals of the
current grid with the interval of the target grid.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rebin(longitude,</span> <span class="pre">longitude_bounds</span> <span class="pre">[degree_east],</span> <span class="pre">(-180,</span> <span class="pre">-90,</span> <span class="pre">0,</span> <span class="pre">90,</span> <span class="pre">180))</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rebin(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">(0.0,</span> <span class="pre">1.5,</span> <span class="pre">3.0,</span> <span class="pre">7.0))</span></code></div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rebin(dimension,</span> <span class="pre">axis-bounds-variable</span> <span class="pre">unit,</span> <span class="pre">length,</span> <span class="pre">offset,</span> <span class="pre">step)</span></code></dt><dd><p>Regrid all variables in the product for the given dimension using
the given axis boundaries variable as target grid. The operation will
use a <code class="docutils literal notranslate"><span class="pre">derive(axis-variable</span> <span class="pre">{[time,]dimension,2}</span> <span class="pre">unit)</span></code> to determine
the current grid. The N+1 edges of the target grid are specified as
length, offset, and step parameters.
Rebinning uses a weighted average of the overlapping intervals of the
current grid with the interval of the target grid.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rebin(longitude,</span> <span class="pre">longitude_bounds</span> <span class="pre">[degree_east],</span> <span class="pre">5,</span> <span class="pre">-180,</span> <span class="pre">90)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rebin(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">11,</span> <span class="pre">0,</span> <span class="pre">1.0)</span></code></div>
</div>
</div></blockquote>
</dd>
</dl>
<dl id="operation-regrid">
<dt><code class="docutils literal notranslate"><span class="pre">regrid(dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">(value,</span> <span class="pre">...))</span></code></dt><dd><p>Regrid all variables in the product for the given dimension using
the given axis variable as target grid. The operation will use a
<code class="docutils literal notranslate"><span class="pre">derive(axis-variable</span> <span class="pre">{[time,]dimension}</span> <span class="pre">unit)</span></code> to determine
the current grid. The target grid is specified as a list of values.
Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">regrid(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">(1.0,</span> <span class="pre">2.0,</span> <span class="pre">5.0,</span> <span class="pre">10.0,</span> <span class="pre">15.0,</span> <span class="pre">20.0,</span> <span class="pre">30.0))</span></code></p>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">regrid(dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">(value,</span> <span class="pre">...),</span> <span class="pre">(value,</span> <span class="pre">...))</span></code></dt><dd><p>Regrid all variables in the product for the given dimension using
the given axis variable as target grid. The operation will use a
<code class="docutils literal notranslate"><span class="pre">derive(axis-variable</span> <span class="pre">{[time,]dimension}</span> <span class="pre">unit)</span></code> and
<code class="docutils literal notranslate"><span class="pre">derive(&lt;axis-variable&gt;_bounds</span> <span class="pre">{[time,]dimension}</span> <span class="pre">unit)</span></code> to
determine the current grid and boundaries. The target grid mid points
are specified by the first list of values and the target grid
boundaries by the second list of values. If there are N mid points,
then the list of boundary values can either contain N+1 points if the
boundaries are adjacent or 2N points to define each boundary pair
separately.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">regrid(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">(1.0,</span> <span class="pre">2.0,</span> <span class="pre">5.0),</span> <span class="pre">(0.0,</span> <span class="pre">1.5,</span> <span class="pre">3.0,</span> <span class="pre">7.0))</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">regrid(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">(1.0,</span> <span class="pre">2.0,</span> <span class="pre">5.0),</span> <span class="pre">(0.5,</span> <span class="pre">1.5,</span> <span class="pre">1.5,</span> <span class="pre">2.5,</span> <span class="pre">4.0,</span> <span class="pre">6.0))</span></code></div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">regrid(dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">length,</span> <span class="pre">offset,</span> <span class="pre">step)</span></code></dt><dd><p>Regrid all variables in the product for the given dimension using
the given axis variable as target grid. The operation will use a
<code class="docutils literal notranslate"><span class="pre">derive(axis-variable</span> <span class="pre">{[time,]dimension}</span> <span class="pre">unit)</span></code> to determine
the current grid. The target grid is specified as using a length,
offset, and step parameters.
Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">regrid(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">10,</span> <span class="pre">0.5,</span> <span class="pre">1.0)</span></code></div>
<div class="line">(indicating a grid of altitudes 0.5, 1.5, …, 9.5)</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">regrid(time,</span> <span class="pre">datetime</span> <span class="pre">[hours</span> <span class="pre">since</span> <span class="pre">2017-04-01],</span> <span class="pre">23,</span> <span class="pre">0.5,</span> <span class="pre">1.0)</span></code></div>
</div>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">regrid(dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">collocation-result-file,</span> <span class="pre">a|b,</span> <span class="pre">dataset-dir)</span></code></dt><dd><p>Regrid all variables in the product for the given dimension using the
target grid taken from a collocated dataset. The fourth parameter
indicates which dataset contains the target grid.
Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">regrid(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">&quot;collocation-result.csv&quot;,</span> <span class="pre">b,</span> <span class="pre">&quot;./correlative_data/&quot;)</span></code></p>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">regrid(dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">collocated-file)</span></code></dt><dd><p>Regrid all variables in the product for the given dimension using the
target grid taken from a single merged collocated product. Both the
product and the collocated product need to have a <code class="docutils literal notranslate"><span class="pre">collocation_index</span></code>
variable that will be used to associate the right collocated grid to
each sample.
Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">regrid(vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">&quot;./collocated_file.nc&quot;)</span></code></p>
</div></blockquote>
</dd>
</dl>
<dl id="operation-rename">
<dt><code class="docutils literal notranslate"><span class="pre">rename(variable,</span> <span class="pre">new_name)</span></code></dt><dd><p>Rename the variable to the new name.
Note that this operation should be used with care since it will
change the meaning of the data (potentially interpreting it
incorrectly in further operations). It is primarilly meant to
add/remove prefixes (such as surface/tropospheric/etc.) to allow
the variable to be used in a more specific (with prefix) or
generic (without prefix) way.
If a product does not have a variable with the source name but
already has a variable with the target name then the rename
operation will do nothing (assuming that the target state is
already satisfied).
Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">rename(surface_temperature,</span> <span class="pre">temperature)</span></code></p>
</div></blockquote>
</dd>
</dl>
<dl id="operation-set">
<dt><code class="docutils literal notranslate"><span class="pre">set(option,</span> <span class="pre">value)</span></code></dt><dd><p>Set a specific option in HARP.
Both the option and value parameters need to be provided as string
values (using double quotes).
Options will be set ‘globally’ in HARP and will persists for all
further operations in the list. After termination of the list of
operations, all HARP options will be reverted back to their initial
values.
Available options are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">afgl86</span></code></dt><dd><p>Possible values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">disabled</span></code> (default) disable the use of AFGL86 climatology
in variable conversions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enabled</span></code> enable the use of AFGL86 climatology in variable
conversions (using seasonal and latitude band dependence)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">usstd76</span></code> enable AFGL86 using US Standard profiles</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">collocation_datetime</span></code></dt><dd><p>Determine whether to create a collocation_datetime variable when
a collocate_left or collocation_right operation is performed.
The collocation_datetime variable will contain the datetime of
the sample from the other dataset for the collocated pair.
Possible values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">disabled</span></code> (default) variable will not be created</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enabled</span></code> variable will not be created</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">propagate_uncertainty</span></code></dt><dd><p>Determine how to propagate uncertainties for operations that
support this (and where there is a choice).
Possible values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uncorrelated</span></code> (default) to assume fully uncorrelated uncertainties</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">correlated</span></code> to assume fully correlated uncertainties</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">regrid_out_of_bounds</span></code></dt><dd><p>Determine how to deal with interpolation of target grid values
that fall outside the source grid range.
Possible values are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nan</span></code> (default) to set values outside the range to NaN</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">edge</span></code> to use the nearest edge value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extrapolate</span></code> to perform extrapolation</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">set(&quot;afgl86&quot;,</span> <span class="pre">&quot;enabled&quot;)</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">set(&quot;regrid_out_of_bounds&quot;,</span> <span class="pre">&quot;extrapolate&quot;)</span></code></div>
</div>
</div></blockquote>
</dd>
</dl>
<dl id="operation-smooth">
<dt><code class="docutils literal notranslate"><span class="pre">smooth(variable,</span> <span class="pre">dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">collocation-result-file,</span> <span class="pre">a|b,</span> <span class="pre">dataset-dir)</span></code></dt><dd><p>Smooth the given variable in the product for the given dimension
using the avaraging kernel (and a-priori profile, if available)
from a collocated dataset. The fifth parameter indicates which
dataset contains the avaraging kernel. Before smoothing the
product is regridded to the grid of the averaging kernel using
the given axis-variable (see also <code class="docutils literal notranslate"><span class="pre">regrid()</span></code>).
Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">smooth(O3_number_density,</span> <span class="pre">vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">&quot;collocation-result.csv&quot;,</span> <span class="pre">b,</span> <span class="pre">&quot;./correlative_data/&quot;)</span></code></p>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smooth((variable,</span> <span class="pre">variable,</span> <span class="pre">...),</span> <span class="pre">dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">collocation-result-file,</span> <span class="pre">a|b,</span> <span class="pre">dataset-dir)</span></code></dt><dd><p>Same as above, but then providing a list of variables that need
to be smoothed. For each variable an associated averaging kernel
(and associated a-priori, if applicable) needs to be present in
the collocated dataset.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smooth(variable,</span> <span class="pre">dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">collocated-file)</span></code></dt><dd><p>Smooth the given variable in the product for the given dimension
using the avaraging kernel (and a-priori profile, if available)
from a single merged collocated product. Both the product and the
collocated product need to have a <code class="docutils literal notranslate"><span class="pre">collocation_index</span></code> variable
that will be used to associate the right collocated grid/avk/apriori
to each sample.
Before smoothing the product is regridded to the grid of the
averaging kernel using the given axis-variable (see also <code class="docutils literal notranslate"><span class="pre">regrid()</span></code>).
Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">smooth(O3_number_density,</span> <span class="pre">vertical,</span> <span class="pre">altitude</span> <span class="pre">[km],</span> <span class="pre">&quot;./collocated_file.nc&quot;)</span></code></p>
</div></blockquote>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">smooth((variable,</span> <span class="pre">variable,</span> <span class="pre">...),</span> <span class="pre">dimension,</span> <span class="pre">axis-variable</span> <span class="pre">unit,</span> <span class="pre">collocated-file)</span></code></dt><dd><p>Same as above, but then providing a list of variables that need
to be smoothed. For each variable an associated averaging kernel
(and associated a-priori, if applicable) needs to be present in
the merged collocated file.</p>
</dd>
</dl>
<dl class="simple" id="operation-sort">
<dt><code class="docutils literal notranslate"><span class="pre">sort(variable)</span></code></dt><dd><p>Reorder a dimension for all variables in the product such that the
variable provided as parameter ends up being sorted. The variable
should be one dimensional and the dimension that gets reordered is
this dimension of the referenced variable.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sort((variable,</span> <span class="pre">...))</span></code></dt><dd><p>Same as above, but use a list of variables for sorting.</p>
</dd>
</dl>
<dl class="simple" id="operation-squash">
<dt><code class="docutils literal notranslate"><span class="pre">squash(dimension,</span> <span class="pre">variable)</span></code></dt><dd><p>Remove the given dimension for the variable, assuming that the
content for all items in the given dimension is the same.
If the content is not the same an error will be raised.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">squash(dimension,</span> <span class="pre">(variable,</span> <span class="pre">...))</span></code></dt><dd><p>Same as above, but then providing a list of variables that need
to be squashed.</p>
</dd>
</dl>
<dl class="simple" id="operation-valid">
<dt><code class="docutils literal notranslate"><span class="pre">valid(variable)</span></code></dt><dd><p>Filter a dimension for all variables in the product such that
invalid values for the variable provided as parameter get excluded
(values outside the valid range of the variable, or NaN).
This operation is executed similar to a comparison filter.</p>
</dd>
</dl>
<dl id="operation-wrap">
<dt><code class="docutils literal notranslate"><span class="pre">wrap(variable</span> <span class="pre">[unit],</span> <span class="pre">minimum,</span> <span class="pre">maximum)</span></code></dt><dd><p>Wrap the values of the variable to the range given by minimum
and maximum. The result is: min + (value - min) % (max - min)
Example:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">wrap(longitude</span> <span class="pre">[degree_east],</span> <span class="pre">-180,</span> <span class="pre">180)</span></code></p>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
</section>
<section id="collocation-result-file">
<h2>Collocation result file</h2>
<p>The format of the collocation result file is described in the
<a class="reference internal" href="conventions/collocation_result.html"><span class="doc">conventions</span></a> section of the HARP documentation.</p>
</section>
<section id="area-mask-file">
<h2>Area mask file</h2>
<p>A comma separated (csv) file is used as input for area filters.</p>
<p>It has the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lat0</span><span class="p">,</span><span class="n">lon0</span><span class="p">,</span><span class="n">lat1</span><span class="p">,</span><span class="n">lon1</span><span class="p">,</span><span class="n">lat2</span><span class="p">,</span><span class="n">lon2</span><span class="p">,</span><span class="n">lat3</span><span class="p">,</span><span class="n">lon3</span>
<span class="mf">0.0</span><span class="p">,</span><span class="mf">60.0</span><span class="p">,</span><span class="mf">40.0</span><span class="p">,</span><span class="mf">60.0</span><span class="p">,</span><span class="mf">40.0</span><span class="p">,</span><span class="o">-</span><span class="mf">60.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="o">-</span><span class="mf">60.0</span>
<span class="o">...</span>
</pre></div>
</div>
<p>It starts with a header with latitude, longitude column headers (this
header will be skipped by HARP). Then, each further line defines a polygon.
Each polygon consists of the vertices as defined on that line.</p>
</section>
<section id="examples">
<h2>Examples</h2>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">derive(altitude</span> <span class="pre">{time}</span> <span class="pre">[km]);</span> <span class="pre">pressure</span> <span class="pre">&gt;</span> <span class="pre">3.0</span> <span class="pre">[bar]</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">point_distance(-52.5</span> <span class="pre">[degree],</span> <span class="pre">1.0</span> <span class="pre">[rad],</span> <span class="pre">1e3</span> <span class="pre">[km])</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">index</span> <span class="pre">in</span> <span class="pre">(0,</span> <span class="pre">10,</span> <span class="pre">20,</span> <span class="pre">30,</span> <span class="pre">40);</span> <span class="pre">valid(pressure)</span></code></div>
</div>
</div></blockquote>
</section>
<section id="formal-definition">
<h2>Formal definition</h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">digit</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="o">|</span><span class="s1">&#39;1&#39;</span><span class="o">|</span><span class="s1">&#39;2&#39;</span><span class="o">|</span><span class="s1">&#39;3&#39;</span><span class="o">|</span><span class="s1">&#39;4&#39;</span><span class="o">|</span><span class="s1">&#39;5&#39;</span><span class="o">|</span><span class="s1">&#39;6&#39;</span><span class="o">|</span><span class="s1">&#39;7&#39;</span><span class="o">|</span><span class="s1">&#39;8&#39;</span><span class="o">|</span><span class="s1">&#39;9&#39;</span> <span class="p">;</span>
<span class="n">sign</span> <span class="o">=</span> <span class="s1">&#39;+&#39;</span><span class="o">|</span><span class="s1">&#39;-&#39;</span> <span class="p">;</span>

<span class="n">alpha</span> <span class="o">=</span>
   <span class="s1">&#39;a&#39;</span><span class="o">|</span><span class="s1">&#39;b&#39;</span><span class="o">|</span><span class="s1">&#39;c&#39;</span><span class="o">|</span><span class="s1">&#39;d&#39;</span><span class="o">|</span><span class="s1">&#39;e&#39;</span><span class="o">|</span><span class="s1">&#39;f&#39;</span><span class="o">|</span><span class="s1">&#39;g&#39;</span><span class="o">|</span><span class="s1">&#39;h&#39;</span><span class="o">|</span><span class="s1">&#39;i&#39;</span><span class="o">|</span><span class="s1">&#39;j&#39;</span><span class="o">|</span><span class="s1">&#39;k&#39;</span><span class="o">|</span><span class="s1">&#39;l&#39;</span><span class="o">|</span><span class="s1">&#39;m&#39;</span><span class="o">|</span>
   <span class="s1">&#39;n&#39;</span><span class="o">|</span><span class="s1">&#39;o&#39;</span><span class="o">|</span><span class="s1">&#39;p&#39;</span><span class="o">|</span><span class="s1">&#39;q&#39;</span><span class="o">|</span><span class="s1">&#39;r&#39;</span><span class="o">|</span><span class="s1">&#39;s&#39;</span><span class="o">|</span><span class="s1">&#39;t&#39;</span><span class="o">|</span><span class="s1">&#39;u&#39;</span><span class="o">|</span><span class="s1">&#39;v&#39;</span><span class="o">|</span><span class="s1">&#39;w&#39;</span><span class="o">|</span><span class="s1">&#39;x&#39;</span><span class="o">|</span><span class="s1">&#39;y&#39;</span><span class="o">|</span><span class="s1">&#39;z&#39;</span><span class="o">|</span>
   <span class="s1">&#39;A&#39;</span><span class="o">|</span><span class="s1">&#39;B&#39;</span><span class="o">|</span><span class="s1">&#39;C&#39;</span><span class="o">|</span><span class="s1">&#39;D&#39;</span><span class="o">|</span><span class="s1">&#39;E&#39;</span><span class="o">|</span><span class="s1">&#39;F&#39;</span><span class="o">|</span><span class="s1">&#39;G&#39;</span><span class="o">|</span><span class="s1">&#39;H&#39;</span><span class="o">|</span><span class="s1">&#39;I&#39;</span><span class="o">|</span><span class="s1">&#39;J&#39;</span><span class="o">|</span><span class="s1">&#39;K&#39;</span><span class="o">|</span><span class="s1">&#39;L&#39;</span><span class="o">|</span><span class="s1">&#39;M&#39;</span><span class="o">|</span>
   <span class="s1">&#39;N&#39;</span><span class="o">|</span><span class="s1">&#39;O&#39;</span><span class="o">|</span><span class="s1">&#39;P&#39;</span><span class="o">|</span><span class="s1">&#39;Q&#39;</span><span class="o">|</span><span class="s1">&#39;R&#39;</span><span class="o">|</span><span class="s1">&#39;S&#39;</span><span class="o">|</span><span class="s1">&#39;T&#39;</span><span class="o">|</span><span class="s1">&#39;U&#39;</span><span class="o">|</span><span class="s1">&#39;V&#39;</span><span class="o">|</span><span class="s1">&#39;W&#39;</span><span class="o">|</span><span class="s1">&#39;X&#39;</span><span class="o">|</span><span class="s1">&#39;Y&#39;</span><span class="o">|</span><span class="s1">&#39;Z&#39;</span> <span class="p">;</span>

<span class="n">character</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">|</span> <span class="n">digit</span> <span class="o">|</span>
   <span class="s1">&#39; &#39;</span><span class="o">|</span><span class="s1">&#39;!&#39;</span><span class="o">|</span><span class="s1">&#39;&quot;&#39;</span><span class="o">|</span><span class="s1">&#39;#&#39;</span><span class="o">|</span><span class="s1">&#39;$&#39;</span><span class="o">|</span><span class="s1">&#39;%&#39;</span><span class="o">|</span><span class="s1">&#39;&amp;&#39;</span><span class="o">|</span><span class="s2">&quot;&#39;&quot;</span><span class="o">|</span><span class="s1">&#39;(&#39;</span><span class="o">|</span><span class="s1">&#39;)&#39;</span><span class="o">|</span><span class="s1">&#39;*&#39;</span><span class="o">|</span><span class="s1">&#39;+&#39;</span><span class="o">|</span><span class="s1">&#39;,&#39;</span><span class="o">|</span>
   <span class="s1">&#39;-&#39;</span><span class="o">|</span><span class="s1">&#39;.&#39;</span><span class="o">|</span><span class="s1">&#39;/&#39;</span><span class="o">|</span><span class="s1">&#39;:&#39;</span><span class="o">|</span><span class="s1">&#39;;&#39;</span><span class="o">|</span><span class="s1">&#39;&lt;&#39;</span><span class="o">|</span><span class="s1">&#39;=&#39;</span><span class="o">|</span><span class="s1">&#39;&gt;&#39;</span><span class="o">|</span><span class="s1">&#39;?&#39;</span><span class="o">|</span><span class="s1">&#39;@&#39;</span><span class="o">|</span><span class="s1">&#39;[&#39;</span><span class="o">|</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">|&#39;</span><span class="p">]</span><span class="s1">&#39;|</span>
   <span class="s1">&#39;^&#39;</span><span class="o">|</span><span class="s1">&#39;_&#39;</span><span class="o">|</span><span class="s1">&#39;`&#39;</span><span class="o">|</span><span class="s1">&#39;{&#39;</span><span class="o">|</span><span class="s1">&#39;|&#39;</span><span class="o">|</span><span class="s1">&#39;}&#39;</span><span class="o">|</span><span class="s1">&#39;~&#39;</span> <span class="p">;</span>

<span class="n">identifier</span> <span class="o">=</span> <span class="n">alpha</span><span class="p">,</span> <span class="p">[{</span><span class="n">alpha</span> <span class="o">|</span> <span class="n">digit</span> <span class="o">|</span> <span class="s1">&#39;_&#39;</span><span class="p">}]</span> <span class="p">;</span>

<span class="n">variable</span> <span class="o">=</span> <span class="n">identifier</span> <span class="p">;</span>

<span class="n">variablelist</span> <span class="o">=</span>
   <span class="n">variable</span> <span class="o">|</span>
   <span class="n">variablelist</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span> <span class="p">;</span>

<span class="n">intvalue</span> <span class="o">=</span> <span class="p">[</span><span class="n">sign</span><span class="p">],</span> <span class="p">{</span><span class="n">digit</span><span class="p">}</span> <span class="p">;</span>

<span class="n">floatvalue</span> <span class="o">=</span>
   <span class="p">[</span><span class="n">sign</span><span class="p">],</span> <span class="p">(</span><span class="s1">&#39;N&#39;</span> <span class="o">|</span> <span class="s1">&#39;n&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span> <span class="o">|</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;N&#39;</span> <span class="o">|</span> <span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="o">|</span>
   <span class="p">[</span><span class="n">sign</span><span class="p">],</span> <span class="p">(</span><span class="s1">&#39;I&#39;</span> <span class="o">|</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;N&#39;</span> <span class="o">|</span> <span class="s1">&#39;n&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;F&#39;</span> <span class="o">|</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">|</span>
   <span class="p">(</span><span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="p">[{</span><span class="n">digit</span><span class="p">}]</span> <span class="o">|</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="p">{</span><span class="n">digit</span><span class="p">}),</span> <span class="p">[(</span><span class="s1">&#39;D&#39;</span> <span class="o">|</span> <span class="s1">&#39;d&#39;</span> <span class="o">|</span> <span class="s1">&#39;E&#39;</span> <span class="o">|</span> <span class="s1">&#39;e&#39;</span><span class="p">),</span> <span class="n">intvalue</span><span class="p">]</span> <span class="p">;</span>

<span class="n">stringvalue</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="p">[{</span><span class="n">character</span><span class="o">-</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">, &#39;</span><span class="s2">&quot;&#39;) | &#39;</span><span class="se">\&#39;</span><span class="s2"> character}], &#39;&quot;</span><span class="s1">&#39; ;</span>

<span class="n">value</span> <span class="o">=</span> <span class="n">intvalue</span> <span class="o">|</span> <span class="n">floatvalue</span> <span class="o">|</span> <span class="n">stringvalue</span> <span class="p">;</span>

<span class="n">intvaluelist</span> <span class="o">=</span>
   <span class="n">intvalue</span> <span class="o">|</span>
   <span class="n">intvaluelist</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">;</span>

<span class="n">floatvaluelist</span> <span class="o">=</span>
   <span class="n">floatvalue</span> <span class="o">|</span>
   <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">;</span>

<span class="n">stringvaluelist</span> <span class="o">=</span>
   <span class="n">stringvalue</span> <span class="o">|</span>
   <span class="n">stringvaluelist</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">;</span>

<span class="n">valuelist</span> <span class="o">=</span> <span class="n">intvaluelist</span> <span class="o">|</span> <span class="n">floatvaluelist</span> <span class="o">|</span> <span class="n">stringvaluelist</span> <span class="p">;</span>

<span class="n">unit</span> <span class="o">=</span> <span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="p">[{</span><span class="n">character</span><span class="o">-</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">)}],</span> <span class="s1">&#39;]&#39;</span> <span class="p">;</span>

<span class="n">datatype</span> <span class="o">=</span> <span class="s1">&#39;int8&#39;</span> <span class="o">|</span> <span class="s1">&#39;int16&#39;</span> <span class="o">|</span> <span class="s1">&#39;int32&#39;</span> <span class="o">|</span> <span class="s1">&#39;float&#39;</span> <span class="o">|</span> <span class="s1">&#39;double&#39;</span> <span class="o">|</span> <span class="s1">&#39;string&#39;</span> <span class="p">;</span>

<span class="n">dimension</span> <span class="o">=</span> <span class="s1">&#39;time&#39;</span> <span class="o">|</span> <span class="s1">&#39;latitude&#39;</span> <span class="o">|</span> <span class="s1">&#39;longitude&#39;</span> <span class="o">|</span> <span class="s1">&#39;vertical&#39;</span> <span class="o">|</span> <span class="s1">&#39;spectral&#39;</span> <span class="o">|</span> <span class="s1">&#39;independent&#39;</span> <span class="p">;</span>

<span class="n">dimensionlist</span> <span class="o">=</span>
   <span class="n">dimension</span> <span class="o">|</span>
   <span class="n">dimensionlist</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dimension</span> <span class="p">;</span>

<span class="n">dimensionspec</span> <span class="o">=</span> <span class="s1">&#39;{&#39;</span> <span class="n">dimensionlist</span> <span class="s1">&#39;}&#39;</span> <span class="p">;</span>

<span class="n">bit_mask_operator</span> <span class="o">=</span> <span class="s1">&#39;=&amp;&#39;</span> <span class="o">|</span> <span class="s1">&#39;!&amp;&#39;</span> <span class="p">;</span>
<span class="n">operator</span> <span class="o">=</span> <span class="s1">&#39;==&#39;</span> <span class="o">|</span> <span class="s1">&#39;!=&#39;</span> <span class="o">|</span> <span class="s1">&#39;&gt;=&#39;</span> <span class="o">|</span> <span class="s1">&#39;&lt;=&#39;</span> <span class="o">|</span> <span class="s1">&#39;&lt;&#39;</span> <span class="o">|</span> <span class="s1">&#39;&gt;&#39;</span> <span class="p">;</span>

<span class="n">functioncall</span> <span class="o">=</span>
   <span class="s1">&#39;area_covers_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;area_covers_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;area_covers_point&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;area_inside_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;area_inside_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;area_intersects_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;area_intersects_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;area_intersects_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;area_intersects_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;bin&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">variable</span><span class="p">],</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;bin&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variablelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;bin&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="p">(</span> <span class="s1">&#39;a&#39;</span> <span class="o">|</span> <span class="s1">&#39;b&#39;</span> <span class="p">),</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;bin_spatial&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;bin_spatial&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;clamp&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;collocate_left&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;collocate_left&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;collocate_left&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;collocate_right&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;collocate_right&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;collocate_right&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;derive&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="p">[</span><span class="n">datatype</span><span class="p">],</span> <span class="p">[</span><span class="n">dimensionspec</span><span class="p">],</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;derive_smoothed_column&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">dimensionspec</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="p">(</span> <span class="s1">&#39;a&#39;</span> <span class="o">|</span> <span class="s1">&#39;b&#39;</span> <span class="p">),</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;derive_smoothed_column&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">dimensionspec</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;exclude&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variablelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;flatten&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;keep&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variablelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;longitude_range&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;point_distance&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;point_in_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;point_in_area&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;rebin&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;rebin&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;regrid&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;regrid&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">floatvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;regrid&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">intvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;regrid&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="p">(</span> <span class="s1">&#39;a&#39;</span> <span class="o">|</span> <span class="s1">&#39;b&#39;</span> <span class="p">),</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;regrid&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;rename&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;set&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;smooth&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="p">(</span> <span class="s1">&#39;a&#39;</span> <span class="o">|</span> <span class="s1">&#39;b&#39;</span> <span class="p">),</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;smooth&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variablelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="p">(</span> <span class="s1">&#39;a&#39;</span> <span class="o">|</span> <span class="s1">&#39;b&#39;</span> <span class="p">),</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;smooth&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;smooth&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variablelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">stringvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;sort&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;sort&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variablelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;squash&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;squash&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">variablelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;valid&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="s1">&#39;wrap&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">],</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">floatvalue</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="p">;</span>

<span class="n">operationexpr</span> <span class="o">=</span>
   <span class="n">variable</span><span class="p">,</span> <span class="n">bit_mask_operator</span><span class="p">,</span> <span class="n">intvalue</span> <span class="o">|</span>
   <span class="n">variable</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">]</span> <span class="o">|</span>
   <span class="n">variable</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;not&#39;</span><span class="p">],</span> <span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">valuelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">unit</span><span class="p">]</span> <span class="o">|</span>
   <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="n">operator</span><span class="p">,</span> <span class="n">intvalue</span> <span class="o">|</span>
   <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">dimension</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span>  <span class="p">[</span><span class="s1">&#39;not&#39;</span><span class="p">],</span> <span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">intvaluelist</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span>
   <span class="n">functioncall</span> <span class="o">|</span>
   <span class="n">operationexpr</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">operationexpr</span> <span class="p">;</span>

<span class="n">operations</span> <span class="o">=</span>
   <span class="n">operationexpr</span> <span class="s1">&#39;;&#39;</span> <span class="o">|</span>
   <span class="n">operationexpr</span> <span class="p">;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="algorithms/derivations/wind_velocity.html" class="btn btn-neutral float-left" title="wind velocity derivations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ingestions/index.html" class="btn btn-neutral float-right" title="Ingestion definitions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2025 S[&amp;]T, The Netherlands.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>