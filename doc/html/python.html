<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python interface &mdash; HARP 1.27 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="next" title="R interface" href="R.html" />
    <link rel="prev" title="MATLAB interface" href="matlab.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            HARP
          </a>
              <div class="version">
                1.27
              </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions/index.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="operations.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="ingestions/index.html">Ingestion definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="libharp.html">C library</a></li>
<li class="toctree-l1"><a class="reference internal" href="idl.html">IDL interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="matlab.html">MATLAB interface</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dimension-types">Dimension types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-types">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#unicode">Unicode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-reference">API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#types">Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#harp.Product"><code class="docutils literal notranslate"><span class="pre">harp.Product</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.Variable"><code class="docutils literal notranslate"><span class="pre">harp.Variable</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#functions">Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#harp.import_product"><code class="docutils literal notranslate"><span class="pre">harp.import_product()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.import_product_metadata"><code class="docutils literal notranslate"><span class="pre">harp.import_product_metadata()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.export_product"><code class="docutils literal notranslate"><span class="pre">harp.export_product()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.concatenate"><code class="docutils literal notranslate"><span class="pre">harp.concatenate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.execute_operations"><code class="docutils literal notranslate"><span class="pre">harp.execute_operations()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.convert_unit"><code class="docutils literal notranslate"><span class="pre">harp.convert_unit()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.to_dict"><code class="docutils literal notranslate"><span class="pre">harp.to_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.get_encoding"><code class="docutils literal notranslate"><span class="pre">harp.get_encoding()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.set_encoding"><code class="docutils literal notranslate"><span class="pre">harp.set_encoding()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.version"><code class="docutils literal notranslate"><span class="pre">harp.version()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#exceptions">Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#harp.Error"><code class="docutils literal notranslate"><span class="pre">harp.Error</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.CLibraryError"><code class="docutils literal notranslate"><span class="pre">harp.CLibraryError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.UnsupportedTypeError"><code class="docutils literal notranslate"><span class="pre">harp.UnsupportedTypeError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.UnsupportedDimensionError"><code class="docutils literal notranslate"><span class="pre">harp.UnsupportedDimensionError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#harp.NoDataError"><code class="docutils literal notranslate"><span class="pre">harp.NoDataError</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="R.html">R interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Command line tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HARP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Python interface</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="python-interface">
<h1>Python interface</h1>
<p>The Python interface consists of a Python package <code class="docutils literal notranslate"><span class="pre">'harp'</span></code> that provides a set
of functions to <a class="reference internal" href="#harp.import_product" title="harp.import_product"><code class="xref py py-func docutils literal notranslate"><span class="pre">import</span></code></a> and <a class="reference internal" href="#harp.export_product" title="harp.export_product"><code class="xref py py-func docutils literal notranslate"><span class="pre">export</span></code></a> HARP products. The import can be used to read products
using the HARP format or to read non-HARP products of a type <a class="reference internal" href="ingestions/index.html"><span class="doc">supported by
HARP</span></a>. The Python interface depends on the <code class="docutils literal notranslate"><span class="pre">_cffi_backend</span></code>
module, which is part of the C foreign function interface (cffi) package. This
package must be installed in order to be able to use the Python interface. See
the <a class="reference external" href="http://cffi.readthedocs.org/en/latest/installation.html">cffi documentation</a> for details on how to install the cffi package.</p>
<p>Products are represented in Python by instances of <a class="reference internal" href="#harp.Product" title="harp.Product"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Product</span></code></a>,
which can be manipulated freely from within Python. A <a class="reference internal" href="#harp.Product" title="harp.Product"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Product</span></code></a>
instance contains a <a class="reference internal" href="#harp.Variable" title="harp.Variable"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Variable</span></code></a> instance for each variable
contained in the product. A <a class="reference internal" href="#harp.Product" title="harp.Product"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Product</span></code></a> also contains special
entries for the global attributes <cite>source_product</cite> and <cite>history</cite>
(a <a class="reference internal" href="#harp.Product" title="harp.Product"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Product</span></code></a> will thus not be able to contain variables with
these names). Note that the <cite>Conventions</cite>, <cite>datetime_start</cite> and <cite>datetime_stop</cite>
global attributes are not included in a <a class="reference internal" href="#harp.Product" title="harp.Product"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Product</span></code></a> as these are
automatically handled by the import/export functions of HARP.</p>
<p>Products can be <a class="reference internal" href="#harp.export_product" title="harp.export_product"><code class="xref py py-func docutils literal notranslate"><span class="pre">exported</span></code></a> as HARP compliant
products in any of the file formats supported by the HARP C library
(NetCDF/HDF4/HDF5). Such exported products can subsequently be processed further
using the <a class="reference internal" href="tools.html"><span class="doc">HARP command line tools</span></a>. Products can also be
<a class="reference internal" href="#harp.to_dict" title="harp.to_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">converted</span></code></a> to an <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code>. This can be
convenient when there is a need to interface with existing code such as plotting
libraries, or when the additional information provided by the
<a class="reference internal" href="#harp.Product" title="harp.Product"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Product</span></code></a> representation is not needed.</p>
<section id="dimension-types">
<h2>Dimension types</h2>
<p>The HARP C library defines several dimension types. Each dimension of a variable
is associated with one of these dimension types. The number of dimension types
should match the number of dimensions of the data array.</p>
<p>In Python, all dimension types are referred to by name, except the
<code class="docutils literal notranslate"><span class="pre">independent</span></code> dimension type. Dimension type names are case-sensitive. The
<code class="docutils literal notranslate"><span class="pre">independent</span></code> dimension type is special because variable dimensions associated
with this dimension type need not be of the same length (in contrast to all
other dimension types). The <code class="docutils literal notranslate"><span class="pre">independent</span></code> dimension type is represented in
Python by <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Each <a class="reference internal" href="#harp.Variable" title="harp.Variable"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Variable</span></code></a> instance contains an attribute <code class="docutils literal notranslate"><span class="pre">dimension</span></code>,
which is a list of dimension types. For each dimension of a variable, the
<code class="docutils literal notranslate"><span class="pre">dimension</span></code> attribute indicates the dimension type it is associated with.</p>
<p>The dimension types supported by HARP are:</p>
<dl class="simple">
<dt>time</dt><dd><p>Temporal dimension; this is the only appendable dimension.</p>
</dd>
<dt>vertical</dt><dd><p>Vertical dimension, indicating height or depth.</p>
</dd>
<dt>spectral</dt><dd><p>Spectral dimension, associated with wavelength, wavenumber, or frequency.</p>
</dd>
<dt>latitude</dt><dd><p>Latitude dimension, only to be used for the latitude axis of a regular
(latitude, longitude) grid.</p>
</dd>
<dt>longitude</dt><dd><p>Longitude dimension, only to be used for the longitude axis of a regular
(latitude, longitude) grid.</p>
</dd>
<dt>independent</dt><dd><p>Independent dimension, used to index other quantities, such as the corner
coordinates of ground pixel polygons.</p>
</dd>
</dl>
</section>
<section id="data-types">
<h2>Data types</h2>
<p>The HARP Python interface takes care of the conversion of product and variables
from the C domain to the Python domain and back. This section describes the
relation between types in the C domain and types in the Python domain.</p>
<p>The table below shows the type map that is used to convert the high level
concepts product and variable.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>C type</p></th>
<th class="head"><p>Python type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>harp_product</p></td>
<td><p>harp.Product</p></td>
</tr>
<tr class="row-odd"><td><p>harp_variable</p></td>
<td><p>harp.Variable</p></td>
</tr>
</tbody>
</table>
<p>The table below shows the type map that is used when importing a product, i.e.
when translating from the C domain to the Python domain.</p>
<p>Variable data arrays are converted to NumPy arrays. The NumPy data type used for
the converted array is determined from the HARP data type of the variable
according to the type map shown below. Zero-dimensional arrays of length 1 are
converted to Python scalars using the <code class="docutils literal notranslate"><span class="pre">numpy.asscalar()</span></code> function. The
resulting Python type is also shown in the type map.</p>
<p>Product and variable attributes, being scalars, are converted directly to Python
scalars. The Python type is determined from the HARP data type according to the
type map.</p>
<p>Zero-terminated C strings are always converted to instances of type <code class="docutils literal notranslate"><span class="pre">str</span></code> in
Python. See section <a class="reference internal" href="#unicode-details"><span class="std std-ref">Unicode</span></a> for details on unicode
decoding in Python 3.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>HARP data type</p></th>
<th class="head"><p>NumPy dtype</p></th>
<th class="head"><p>Python type</p></th>
<th class="head"><p>unicode decoding</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>harp_type_int8</p></td>
<td><p>numpy.int8</p></td>
<td><p>int</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>harp_type_int16</p></td>
<td><p>numpy.int16</p></td>
<td><p>int</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>harp_type_int32</p></td>
<td><p>numpy.int32</p></td>
<td><p>int</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>harp_type_float</p></td>
<td><p>numpy.float32</p></td>
<td><p>float</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>harp_type_double</p></td>
<td><p>numpy.float64</p></td>
<td><p>float</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>harp_type_string</p></td>
<td><p>numpy.object_</p></td>
<td><p>str</p></td>
<td><p>Python 3</p></td>
</tr>
</tbody>
</table>
<p>The table below shows the type map that is used when exporting a product, i.e.
when translating from the Python domain to the C domain.</p>
<p>NumPy object arrays (that is, NumPy arrays with data type <code class="docutils literal notranslate"><span class="pre">numpy.object_</span></code>)
will be converted to arrays of zero-terminated C strings. The elements of a
NumPy object array must be all <code class="docutils literal notranslate"><span class="pre">str</span></code> or all <code class="docutils literal notranslate"><span class="pre">bytes</span></code>. (Note that on Python 2,
<code class="docutils literal notranslate"><span class="pre">bytes</span></code> is an alias of <code class="docutils literal notranslate"><span class="pre">str</span></code>.) NumPy arrays with data type <code class="docutils literal notranslate"><span class="pre">numpy.str_</span></code> or
<code class="docutils literal notranslate"><span class="pre">numpy.bytes_</span></code> will be converted to arrays of zero-terminated C strings as
well.</p>
<p>NumPy scalars with data type <code class="docutils literal notranslate"><span class="pre">numpy.object_</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy.str_</span></code>, or
<code class="docutils literal notranslate"><span class="pre">numpy.bytes_</span></code> are converted following the same rules as for NumPy arrays.
NumPy scalars are treated as NumPy arrays of length 1 in this respect. Python
scalars of type <code class="docutils literal notranslate"><span class="pre">str</span></code> or <code class="docutils literal notranslate"><span class="pre">bytes</span></code> will also be converted to zero-terminated C
strings.</p>
<p>Unicode encoding is only performed for array elements or scalars of type <code class="docutils literal notranslate"><span class="pre">str</span></code>
or <code class="docutils literal notranslate"><span class="pre">numpy.str_</span></code>, and only on Python 3. See section <a class="reference internal" href="#unicode-details"><span class="std std-ref">Unicode</span></a> for details on unicode encoding in Python 3.</p>
<p>Any NumPy array, NumPy scalar, or Python scalar that cannot be converted
according to the rules described above is assumed to be numeric. An attempt will
be made to determine the minimal HARP data type that it, or its elements, can be
safely cast to (according to the function <code class="docutils literal notranslate"><span class="pre">numpy.can_cast()</span></code> using the
<code class="docutils literal notranslate"><span class="pre">'safe'</span></code> casting option). See the type map for details.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Python type</p></th>
<th class="head"><p>NumPy dtype</p></th>
<th class="head"><p>type test</p></th>
<th class="head"><p>array element type</p></th>
<th class="head"><p>array element type test</p></th>
<th class="head"><p>HARP data type</p></th>
<th class="head"><p>unicode encoding</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="9"><p>numpy.ndarray
numpy.generic</p></td>
<td rowspan="2"><p>numpy.object_</p></td>
<td rowspan="2"><p>numpy.issubdtype</p></td>
<td><p>str</p></td>
<td><p>isinstance</p></td>
<td><p>harp_type_string</p></td>
<td><p>Python 3</p></td>
</tr>
<tr class="row-odd"><td><p>bytes</p></td>
<td><p>isinstance</p></td>
<td><p>harp_type_string</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p>numpy.str_</p></td>
<td><p>numpy.issubdtype</p></td>
<td></td>
<td></td>
<td><p>harp_type_string</p></td>
<td><p>Python 3</p></td>
</tr>
<tr class="row-odd"><td><p>numpy.bytes_</p></td>
<td><p>numpy.issubdtype</p></td>
<td></td>
<td></td>
<td><p>harp_type_string</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p>numpy.int8</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_int8</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>numpy.int16</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_int16</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>numpy.int32</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_int32</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>numpy.float32</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_float32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>numpy.float64</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_float64</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>str</p></td>
<td></td>
<td><p>isinstance</p></td>
<td></td>
<td></td>
<td><p>harp_type_string</p></td>
<td><p>Python 3</p></td>
</tr>
<tr class="row-even"><td><p>bytes</p></td>
<td></td>
<td><p>isinstance</p></td>
<td></td>
<td></td>
<td><p>harp_type_string</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td rowspan="5"><p>any other type</p></td>
<td><p>numpy.int8</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_int8</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>numpy.int16</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_int16</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>numpy.int32</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_int32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>numpy.float32</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_float32</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>numpy.float64</p></td>
<td><p>numpy.can_cast</p></td>
<td></td>
<td></td>
<td><p>harp_type_float64</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="unicode">
<span id="unicode-details"></span><h2>Unicode</h2>
<p>Zero-terminated C strings received from the HARP C library are always converted
to instances of type <code class="docutils literal notranslate"><span class="pre">str</span></code> in Python. Type <code class="docutils literal notranslate"><span class="pre">str</span></code> is a byte string in Python
2, but a unicode string in Python 3.</p>
<p>In Python 2, no unicode encoding or decoding is performed by the HARP Python
interface.</p>
<p>In Python 3, byte strings received from the HARP C library are decoded using a
configurable encoding. Unicode strings (instances of type <code class="docutils literal notranslate"><span class="pre">str</span></code>) are encoded
using the same encoding into byte strings, which are sent to the HARP C library.
Byte strings (instances of type <code class="docutils literal notranslate"><span class="pre">bytes</span></code>) are passed through without encoding.</p>
<p>The encoding used can be configured by the user, see the
<a class="reference internal" href="#harp.set_encoding" title="harp.set_encoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">harp.set_encoding()</span></code></a> and <a class="reference internal" href="#harp.get_encoding" title="harp.get_encoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">harp.get_encoding()</span></code></a> methods. The
default encoding is <code class="docutils literal notranslate"><span class="pre">'ascii'</span></code>.</p>
</section>
<section id="examples">
<h2>Examples</h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">harp</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="c1"># Create a product in Python and export it as a NetCDF file.</span>
<span class="n">product</span> <span class="o">=</span> <span class="n">harp</span><span class="o">.</span><span class="n">Product</span><span class="p">()</span>
<span class="n">harp</span><span class="o">.</span><span class="n">export_product</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="s2">&quot;empty.nc&quot;</span><span class="p">)</span>

<span class="c1"># Add some variables to the product.</span>
<span class="n">product</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="n">harp</span><span class="o">.</span><span class="n">Variable</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
<span class="n">product</span><span class="o">.</span><span class="n">strings</span> <span class="o">=</span> <span class="n">harp</span><span class="o">.</span><span class="n">Variable</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">)),</span> <span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">])</span>
<span class="n">product</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">harp</span><span class="o">.</span><span class="n">Variable</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
                                    <span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">])</span>
<span class="n">product</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="s2">&quot;K&quot;</span>
<span class="n">product</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;temperature&quot;</span>

<span class="c1"># Pretty print information about the product.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>

<span class="c1"># Pretty print information about the variable &#39;temperature&#39;.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">temperature</span><span class="p">)</span>

<span class="c1"># Set valid minimum value of the variable &#39;temperature&#39;. Note the use of item</span>
<span class="c1"># access syntax instead of attribute access syntax.</span>
<span class="n">product</span><span class="p">[</span><span class="s2">&quot;temperature&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">valid_min</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">temperature</span><span class="p">)</span>

<span class="c1"># Export the updated product as an HDF4 file.</span>
<span class="n">harp</span><span class="o">.</span><span class="n">export_product</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="s2">&quot;non-empty.hdf&quot;</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s2">&quot;hdf4&quot;</span><span class="p">)</span>

<span class="c1"># Convert the product to an OrderedDict.</span>
<span class="n">dict_product</span> <span class="o">=</span> <span class="n">harp</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">product</span><span class="p">)</span>

<span class="c1"># Import an S5P L2 HCHO product.</span>
<span class="n">hcho_product</span> <span class="o">=</span> <span class="n">harp</span><span class="o">.</span><span class="n">import_product</span><span class="p">(</span><span class="s2">&quot;S5P_NRTI_L2__HCHO___20080808T224727_20080808T234211_21635_01_021797_00000000T000000.nc&quot;</span><span class="p">,</span>
                                   <span class="s2">&quot;solar_zenith_angle &lt; 60 [degree]; latitude &gt; 30 [degree_north]; latitude &lt; 60 [degree_north]&quot;</span><span class="p">)</span>

<span class="c1"># Pretty print information about the product.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">hcho_product</span><span class="p">)</span>

<span class="c1"># Export the product as a HARP compliant data product.</span>
<span class="n">harp</span><span class="o">.</span><span class="n">export_product</span><span class="p">(</span><span class="n">hcho_product</span><span class="p">,</span> <span class="s2">&quot;hcho.h5&quot;</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="s1">&#39;hdf5&#39;</span><span class="p">,</span> <span class="n">hdf5_compression</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="api-reference">
<h2>API reference</h2>
<p>This section describes the types, functions, and exceptions defined by the HARP
Python interface.</p>
<section id="types">
<h3>Types</h3>
<p>This section describes the types defined by the HARP Python interface.</p>
<dl class="py class">
<dt class="sig sig-object py" id="harp.Product">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">Product</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_product</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">history</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Python representation of a HARP product.</p>
<p>A product consists of product attributes and variables. Any attribute of a
Product instance of which the name does not start with an underscore is
either a variable or a product attribute. Product attribute names are
reserved and cannot be used for variables.</p>
<p>The list of names reserved for product attributes is:</p>
<dl class="simple">
<dt>source_product</dt><dd><p>Name of the original product this product is derived from.</p>
</dd>
<dt>history</dt><dd><p>New-line separated list of invocations of HARP command line tools that
have been performed on the product.</p>
</dd>
</dl>
<p>Variables can be accessed by name using either the attribute access <code class="docutils literal notranslate"><span class="pre">'.'</span></code>
syntax, or the item access <code class="docutils literal notranslate"><span class="pre">'[]'</span></code> syntax. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="c1"># Alternative ways to access the variable &#39;HCHO_column_number_density&#39;.</span>
<span class="n">density</span> <span class="o">=</span> <span class="n">product</span><span class="o">.</span><span class="n">HCHO_column_number_density</span>
<span class="n">density</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s2">&quot;HCHO_column_number_density&quot;</span><span class="p">]</span>

<span class="c1"># Iterate over all variables in the product. For imported  products, the</span>
<span class="c1"># order of the variables is the same as the order in the source product.</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">product</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">unit</span><span class="p">)</span>
</pre></div>
</div>
<p>Product attributes can be accessed in the same way as variables, but are
<em>not</em> included when iterating over the variables in a product. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="c1"># Print product attributes.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">source_product</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">history</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_product</strong> (<em>str</em>) – Name of the original product this product is
derived from.</p></li>
<li><p><strong>history</strong> (<em>str</em>) – New-line separated list of invocations of HARP command
line tools that have been performed on the product.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="harp.Variable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">Variable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Python representation of a HARP variable.</p>
<p>A variable consists of data (either a scalar or NumPy array), a list of
dimension types that describe the dimensions of the data, and a number of
optional attributes: physical unit, minimum valid value, maximum valid value,
human-readable description, and enumeration name list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – Value(s) associated with the variable; can be either a scalar or
a NumPy array.</p></li>
<li><p><strong>dimension</strong> (<em>list</em>) – List of strings indicating the dimensions the variable
depends on.</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – Physical unit the values associated with the variable are
expressed in.</p></li>
<li><p><strong>valid_min</strong> – Minimum valid value; any value below this threshold is
considered to be invalid.</p></li>
<li><p><strong>valid_max</strong> – Maximum valid value; any value above this threshold is
considered to be invalid.</p></li>
<li><p><strong>description</strong> (<em>str</em>) – Humand-readble description of the variable.</p></li>
<li><p><strong>enum</strong> (<em>list</em>) – List of strings with the names of each enumeration value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="functions">
<h3>Functions</h3>
<p>This section describes the functions defined by the HARP Python library.</p>
<dl class="py function">
<dt class="sig sig-object py" id="harp.import_product">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">import_product</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reduce_operations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_operations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Import a product from a file.</p>
<p>This will first try to import the file as an HDF4, HDF5, or netCDF file that
complies to the HARP Data Format. If the file is not stored using the HARP
format then it will try to import it using one of the available ingestion
modules.</p>
<p>If the filename argument is a list of filenames, a globbing (glob.glob())
pattern, or a list of globbing patterns then the harp.import_product() function
will be called on each individual matching file. All imported products will then
be appended into a single merged product and that merged product will be returned.</p>
<p>If the filename argument is a .pth file, then the products referenced in the .pth
file will be treated as a HARP Dataset and its merged content will be returned.
Note that the <cite>source_product</cite> attribute of products in a HARP Dataset needs to be
unique; if a dataset contains multiple products with the same <cite>source_product</cite> value
then only the last product in the list will be kept.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em><em>,</em><em>list</em>) – Filename, file pattern, .pth file, or list of
filenames/patterns/.pths of the product(s) to import</p></li>
<li><p><strong>operations</strong> (<em>str</em>) – Actions to apply as part of the import; should be
specified as a semi-colon separated string of operations;
in case a list of products is ingested these operations will be
performed on each product individually before the data is merged.</p></li>
<li><p><strong>options</strong> (<em>str</em>) – Ingestion module specific options; should be specified as
a semi-colon separated string of key=value pairs; only
used if a file is not in HARP format.</p></li>
<li><p><strong>reduce_operations</strong> (<em>str</em>) – Actions to apply after each append; should be specified as a
semi-colon separated string of operations;
these operations will only be applied if the filename argument is
a file pattern or a list of filenames/patterns;
this advanced option allows for memory efficient application
of time reduction operations (such as bin()) that would
normally be provided as part of post_operations.</p></li>
<li><p><strong>post_operations</strong> (<em>str</em>) – Actions to apply after the list of products is merged;
should be specified as a semi-colon separated string of operations;
these operations will only be applied if the filename argument is
a file pattern or a list of filenames/patterns.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Imported product.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#harp.Product" title="harp.Product">harp.Product</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="harp.import_product_metadata">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">import_product_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Import specific metadata from a single file.</p>
<dl class="simple">
<dt>This will try to extract the following information from a file.</dt><dd><ul class="simple">
<li><p>datetime_start</p></li>
<li><p>datetime_stop</p></li>
<li><p>dimension lengths for time, latitude, longitude, vertical, and spectral</p></li>
<li><p>source_product</p></li>
</ul>
</dd>
</dl>
<p>If the file is not stored using the HARP format then it will try to import
the metadata using one of the available ingestion modules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – Filename of the product from which to extract the metadata</p></li>
<li><p><strong>options</strong> (<em>str</em>) – Ingestion module specific options; should be specified as
a semi-colon separated string of key=value pairs; only
used if a file is not in HARP format.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Imported metadata.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>collections.OrderedDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="harp.export_product">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">export_product</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">product</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'netcdf'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hdf5_compression</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Export a HARP compliant product.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>product</strong> (<em>str</em>) – Product to export.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Filename of the exported product.</p></li>
<li><p><strong>operations</strong> (<em>str</em>) – Actions to apply as part of the export; should be
specified as a semi-colon separated string of operations.</p></li>
<li><p><strong>file_format</strong> (<em>str</em>) – File format to use; one of ‘netcdf’, ‘hdf4’, or
‘hdf5’.</p></li>
<li><p><strong>hdf5_compression</strong> – Compression level when exporting to hdf5
(0=disabled, 1=low, …, 9=high).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="harp.concatenate">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">concatenate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">productlist</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Combines all HARP products in the list into a single HARP output product.</p>
<p>All non-time dependent variables from the input products are made time
dependent before concatenating them.</p>
<p>Trying to merge input products that do not have the same types of variables
will result in an error.</p>
<p>The ‘index’ variable will not be included in the concatenated product.</p>
<p>The resulting product will not have a ‘source_product’ or ‘history’ global
attribute set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>productlist</strong> (<em>list</em>) – List of harp.Product objects.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Single product containing concatenated content.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#harp.Product" title="harp.Product">harp.Product</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="harp.execute_operations">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">execute_operations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">productlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_operations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Apply operations on the given list of products. ‘productlist’ can be either
a single ‘harp.Product()’ instance or a list of ‘harp.Product()’ instances.</p>
<p>If a list of products is provided then the products will be concatenated/merged after
the ‘operations’ on each product has been performed.</p>
<p>If a ‘post_operations’ parameter is provided then these operations will be applied to
the concatenated/merged product before it is returned.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that this function will first export all products to the HARP
C library and will import the final result back from the C library to the Python
domain. This can have a considerable performance impact when products are large.
You should therefore only use this function if the operation cannot be performed
easily within the Python domain itself. Also, when using this function try to
pass a ‘harp.Product()’ instance that contains the minimal set of variables that
are needed to execute the operations.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>productlist</strong> (<em>list</em>) – List of harp.Product objects or single harp.Product object.</p></li>
<li><p><strong>operations</strong> (<em>str</em>) – Actions to apply on the product(s); should be
specified as a semi-colon separated string of operations;
in case a list of products is provided these operations will be
performed on each product individually before the data is merged.</p></li>
<li><p><strong>post_operations</strong> (<em>str</em>) – Actions to apply after the list of products is merged;
should be specified as a semi-colon separated string of operations;
these operations will only be applied if the productlist parameter
is a list of harp.Product objects.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Single product containing concatenated content with operations being performed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#harp.Product" title="harp.Product">harp.Product</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="harp.convert_unit">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">convert_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_unit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_unit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Perform unit conversion on the list of values.
The list of values will be converted to an array of double values after which the
HARP C library is used to convert the values from ‘from_unit’ to ‘to_unit’.
The function will return a copy of the values with converted units.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_unit</strong> (<em>str</em>) – Existing unit of the data that should be converted
(use udunits2 compliant units)</p></li>
<li><p><strong>to_unit</strong> (<em>str</em>) – Unit to which the data should be converted
(use udunits2 compliant units).</p></li>
<li><p><strong>values</strong> – an array with values on which unit conversion needs to be applied</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Numpy array of unit converted values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="harp.to_dict">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">product</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Convert a <a class="reference internal" href="#harp.Product" title="harp.Product"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Product</span></code></a> instance to an <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> representation provides direct access to the data
associated with each variable. All product attributes and all variable
attributes except the unit attribute are discarded as part of the conversion.</p>
<p>The unit attribute of a variable is represented by adding a scalar variable
of type string with the name of the corresponding variable suffixed with
<code class="docutils literal notranslate"><span class="pre">'_unit'</span></code> as name and the unit as value.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> representation can be convenient when there is a need to
interface with existing code such as plotting libraries, or when the
additional information provided by the Product representation is not needed.</p>
<p>Note that only <a class="reference internal" href="#harp.Product" title="harp.Product"><code class="xref py py-class docutils literal notranslate"><span class="pre">harp.Product</span></code></a> instances can be exported as a HARP
product. The <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> representation does not contain enough
information.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="c1"># Convert input product to an OrderedDict.</span>
<span class="n">product</span> <span class="o">=</span> <span class="n">to_dict</span><span class="p">(</span><span class="n">input_product</span><span class="p">)</span>

<span class="c1"># Accessing the variable &#39;HCHO_column_number_density&#39;.</span>
<span class="n">product</span><span class="p">[</span><span class="s2">&quot;HCHO_column_number_density&quot;</span><span class="p">]</span>

<span class="c1"># Accessing the unit attribute of the variable</span>
<span class="c1"># &#39;HCHO_column_number_density&#39;.</span>
<span class="n">product</span><span class="p">[</span><span class="s2">&quot;HCHO_column_number_density_unit&quot;</span><span class="p">]</span>

<span class="c1"># Iterate over all variables in the product. For imported products, the</span>
<span class="c1"># order of the variables is the same as the order in the source product.</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">product</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>product</strong> (<a class="reference internal" href="#harp.Product" title="harp.Product"><em>harp.Product</em></a>) – Product to convert.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Converted product.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>collections.OrderedDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="harp.get_encoding">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">get_encoding</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Return the encoding used to convert between unicode strings and C strings
(only relevant when using Python 3).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Encoding currently in use.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="harp.set_encoding">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">set_encoding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">encoding</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Set the encoding used to convert between unicode strings and C strings
(only relevant when using Python 3).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>encoding</strong> (<em>str</em>) – Encoding to use.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="harp.version">
<span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Return the version of the HARP C library.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>HARP C library version.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="exceptions">
<h3>Exceptions</h3>
<p>This sections describes the exceptions defined by the HARP Python interface.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="harp.Error">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">Error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Exception base class for all HARP Python interface errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<em>tuple</em>) – Tuple of arguments passed to the constructor; usually a
single string containing an error message.</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="harp.CLibraryError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">CLibraryError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">errno</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strerror</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Exception raised when an error occurs inside the HARP C library.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>errno</strong> (<em>str</em>) – error code; if None, the error code will be retrieved from
the HARP C library.</p></li>
<li><p><strong>strerror</strong> (<em>str</em>) – error message; if None, the error message will be
retrieved from the HARP C library.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="harp.UnsupportedTypeError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">UnsupportedTypeError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Exception raised when unsupported types are encountered, either on the Python
or on the C side of the interface.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<em>tuple</em>) – Tuple of arguments passed to the constructor; usually a
single string containing an error message.</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="harp.UnsupportedDimensionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">UnsupportedDimensionError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Exception raised when unsupported dimensions are encountered, either on the
Python or on the C side of the interface.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<em>tuple</em>) – Tuple of arguments passed to the constructor; usually a
single string containing an error message.</p>
</dd>
</dl>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="harp.NoDataError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">harp.</span></span><span class="sig-name descname"><span class="pre">NoDataError</span></span></dt>
<dd><p>Exception raised when the product returned from an import contains no
variables, or variables without data.</p>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="matlab.html" class="btn btn-neutral float-left" title="MATLAB interface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="R.html" class="btn btn-neutral float-right" title="R interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2025 S[&amp;]T, The Netherlands.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>