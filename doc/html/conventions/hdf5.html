<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HDF5/netCDF-4 &mdash; HARP 1.26 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="next" title="Compatibility with other standards" href="compatibility.html" />
    <link rel="prev" title="HDF4" href="hdf4.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            HARP
          </a>
              <div class="version">
                1.26
              </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Conventions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="datatypes.html">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="dimensions.html">Dimensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="global_attributes.html">Global attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="variable_attributes.html">Variable attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="variable_names.html">Variable names</a></li>
<li class="toctree-l2"><a class="reference internal" href="axis_variables.html">Axis variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="categorical_variables.html">Categorical Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="datetime.html">Datetime values</a></li>
<li class="toctree-l2"><a class="reference internal" href="filenames.html">File naming</a></li>
<li class="toctree-l2"><a class="reference internal" href="netcdf3.html">netCDF-3</a></li>
<li class="toctree-l2"><a class="reference internal" href="hdf4.html">HDF4</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">HDF5/netCDF-4</a></li>
<li class="toctree-l2"><a class="reference internal" href="compatibility.html">Compatibility with other standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="collocation_result.html">Collocation result file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ingestions/index.html">Ingestion definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libharp.html">C library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../idl.html">IDL interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matlab.html">MATLAB interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../R.html">R interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">Command line tools</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HARP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Conventions</a></li>
      <li class="breadcrumb-item active">HDF5/netCDF-4</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hdf5-netcdf-4">
<h1>HDF5/netCDF-4</h1>
<p>This section details a set of additional conventions that are specific to the HDF5 file format.</p>
<p>Note that this section also applies to the netCDF-4 format, since netCDF-4 actually uses HDF5 underneath.</p>
<p>The following table shows the mapping between HARP data types and HDF5 data types. The HDF5 backend uses this mapping
for writing only.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>HARP data type</p></th>
<th class="head"><p>HDF5 data type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>int8</p></td>
<td><p>H5T_NATIVE_SCHAR</p></td>
</tr>
<tr class="row-odd"><td><p>int16</p></td>
<td><p>H5T_NATIVE_SHORT</p></td>
</tr>
<tr class="row-even"><td><p>int32</p></td>
<td><p>H5T_NATIVE_INT</p></td>
</tr>
<tr class="row-odd"><td><p>float</p></td>
<td><p>H5T_NATIVE_FLOAT</p></td>
</tr>
<tr class="row-even"><td><p>double</p></td>
<td><p>H5T_NATIVE_DOUBLE</p></td>
</tr>
<tr class="row-odd"><td><p>string</p></td>
<td><p>H5T_C_S1</p></td>
</tr>
</tbody>
</table>
<p>The mapping used by the HDF5 backend for reading is shown below. The HDF5 data type interface (H5T) is used to
introspect the data type of the variable to be read.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>H5T_get_class()</p></th>
<th class="head"><p>H5T_get_size()</p></th>
<th class="head"><p>H5T_get_sign()</p></th>
<th class="head"><p>H5Tget_native_type()</p></th>
<th class="head"><p>HARP data type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>H5T_INTEGER</p></td>
<td><p>1</p></td>
<td><p>H5T_SGN_2</p></td>
<td></td>
<td><p>int8</p></td>
</tr>
<tr class="row-odd"><td><p>H5T_INTEGER</p></td>
<td><p>2</p></td>
<td><p>H5T_SGN_2</p></td>
<td></td>
<td><p>int16</p></td>
</tr>
<tr class="row-even"><td><p>H5T_INTEGER</p></td>
<td><p>4</p></td>
<td><p>H5T_SGN_2</p></td>
<td></td>
<td><p>int32</p></td>
</tr>
<tr class="row-odd"><td><p>H5T_FLOAT</p></td>
<td></td>
<td></td>
<td><p>H5T_NATIVE_FLOAT</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>H5T_FLOAT</p></td>
<td></td>
<td></td>
<td><p>H5T_NATIVE_DOUBLE</p></td>
<td><p>double</p></td>
</tr>
<tr class="row-odd"><td><p>H5T_STRING</p></td>
<td></td>
<td></td>
<td></td>
<td><p>string</p></td>
</tr>
</tbody>
</table>
<p>HDF5 data types not covered in this table are not supported by HARP.</p>
<p>In the HDF5 data model there is no concept of shared dimensions (unlike netCDF). The shape of an HDF5 dataset is
specified as a list of dimension lengths. However, the netCDF-4 library uses HDF5 as its storage backend. It represents
shared dimensions using HDF5 <em>dimension scales</em>.</p>
<p>Dimension scales were introduced in HDF5 version 1.8.0. A dimension scale is a special dataset that can be attached to
one or more dimensions of other datasets. Multiple dimension scales can be attached to a single dimension, and the
length of the dimension scale does not have to be the same as the length of the dimension it is attached to. There are
no limitations on the shape or dimensionality of a dimension scale, since it is just a dataset with particular
attributes attached.</p>
<p>To represent shared dimensions, netCDF-4 creates dimension scales for each shared dimension and attaches these dimension
scales to the corresponding dimensions of all variables. If a product contains a one-dimensional variable with the same
name as a shared dimension where the single dimension of the variable also matches that shared dimension then the dataset
containing the values of the variable will be used as the dimension scale. Such a variable is called a
<em>coordinate variable</em> in netCDF-4. If a variable has the same name as the dimension but the variable is not
one-dimensional or the single dimension of the variable does not match the dimension then the variable will be stored
with a <code class="docutils literal notranslate"><span class="pre">_nc4_non_coord_</span></code> name prefix in the HDF5 file (this is identical to how netCDF-4 deals with this case).
For shared dimensions for which a variable with the same name does not exist, a stub dataset containing fill values is
created and used as the dimension scale. The optional <code class="docutils literal notranslate"><span class="pre">NAME</span></code> attribute of the dimension scale is set to
<code class="docutils literal notranslate"><span class="pre">This</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">netCDF</span> <span class="pre">dimension</span> <span class="pre">but</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">netCDF</span> <span class="pre">variable.</span></code>, which causes the netCDF-4 library to hide the stub dataset
from the user. For more information about the netCDF-4 format, see the <a class="reference external" href="http://www.unidata.ucar.edu/software/netcdf/docs/file_format_specifications.html#netcdf_4_spec">NetCDF User’s Guide</a>.</p>
<p>The HDF5 file format conventions used by HARP are designed to be compatible with netCDF-4. Like netCDF-4, HARP uses
dimension scales to represent shared dimensions. For independent dimensions, the same approach is used as for the
netCDF-3 backend. For each unique dimension length <code class="docutils literal notranslate"><span class="pre">L</span></code>, a dimension scale named <code class="docutils literal notranslate"><span class="pre">independent_L</span></code> is created.</p>
<p>To summarize, HARP dimensions types are mapped to HDF5 dimension scales as follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>HARP dimension type</p></th>
<th class="head"><p>HDF5 dimension scale</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>time</p></td>
<td><p>time</p></td>
</tr>
<tr class="row-odd"><td><p>latitude</p></td>
<td><p>latitude</p></td>
</tr>
<tr class="row-even"><td><p>longitude</p></td>
<td><p>longitude</p></td>
</tr>
<tr class="row-odd"><td><p>vertical</p></td>
<td><p>vertical</p></td>
</tr>
<tr class="row-even"><td><p>spectral</p></td>
<td><p>spectral</p></td>
</tr>
<tr class="row-odd"><td><p>independent</p></td>
<td><p>independent_&lt;length&gt;</p></td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">_nc3_strict</span></code> attribute is attached to the root group of the HDF5 file such that it will be interpreted using the
netCDF classic data model by the netCDF-4 library. Enhanced features of netCDF-4 beyond the classic data model, such as
groups and user-defined types, are not supported by HARP.</p>
<p>HDF5 can represent strings in several ways. Both fixed and variable length strings are supported. The HDF5 backend
stores a HARP variable of type string as an HDF5 dataset of fixed length strings. The fixed string length equals the
length of the longest string, or 1 if the length of the longest string is zero. Shorter strings are padded with null-
termination characters.</p>
<p>HARP uses empty strings to represent the unit of dimensionless quantities (to distinguish them from non-quantities,
which will lack a unit attribute). However, HDF5 cannot store string attributes with length zero. For this reason
an empty unit string will be written as a <code class="docutils literal notranslate"><span class="pre">units</span></code> attribute with value <code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code> when writing data to HDF5.
When reading from HDF5 a unit string value <code class="docutils literal notranslate"><span class="pre">&quot;1&quot;</span></code> will be converted back again to an empty unit string.</p>
<p>Note that even though the <code class="docutils literal notranslate"><span class="pre">time</span></code> dimension is conceptually considered <cite>appendable</cite>, this dimension is not stored as an
actual appendable dimension in HDF5. Products are read/written from/to files in full and are only modified in memory.
The <cite>appendable</cite> aspect is only relevant for tools such as plotting routines that combine the data from a series of HARP
products in order to provide plots/statistics for a whole dataset (and thus, where data from different files will have
to be concatenated).</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hdf4.html" class="btn btn-neutral float-left" title="HDF4" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="compatibility.html" class="btn btn-neutral float-right" title="Compatibility with other standards" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2025 S[&amp;]T, The Netherlands.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>